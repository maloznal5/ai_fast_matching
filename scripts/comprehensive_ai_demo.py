import time
import json

def typing_effect(text, delay=0.03):
    for char in text:
        print(char, end='', flush=True)
        time.sleep(delay)
    print()

def run_comprehensive_demo():
    print("\n" + "="*70)
    print("üíé AI FAST MATCHING PRO - KREPEZH.UA (INTEGRATED STAGES 1 & 2)")
    print("="*70)
    time.sleep(1)

    # –î–ê–ù–ù–´–ï –ö–õ–ò–ï–ù–¢–ê
    client = {"name": "–ï–≤–≥–µ–Ω–∏–π", "company": "Metiz-Trade", "fav_strength": "8.8"}
    
    # –°–¶–ï–ù–ê–†–ò–ô 1: –°–õ–û–ñ–ù–´–ô –ó–ê–ö–ê–ó (–ë–û–õ–¢–´ + –ì–ê–ô–ö–ò)
    print(f"\nüë§ [–ö–õ–ò–ï–ù–¢]: –ü—Ä–∏–≤–µ—Ç! –ù—É–∂–Ω–æ 2000 –±–æ–ª—Ç–æ–≤ 14—Ö100 –∏ –≥–∞–π–∫–∏ –∫ –Ω–∏–º. –ü–æ–º–Ω–∏—à—å –Ω–∞—à–∏ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã?")
    time.sleep(1)
    
    print(f"\nü§ñ [AI]: –ó–¥—Ä–∞–≤—Å—Ç–≤—É–π—Ç–µ, {client['name']}! –ö–æ–Ω–µ—á–Ω–æ. –ò—Å–ø–æ–ª—å–∑—É—é –≤–∞—à —Å—Ç–∞–Ω–¥–∞—Ä—Ç: DIN 933, –∫–ª–∞—Å—Å {client['fav_strength']}.")
    print("‚öôÔ∏è [STAGE 1 & 2]: –ü–∞—Ä—Å–∏–Ω–≥ –∑–∞—è–≤–∫–∏ + –ú–µ—Ç—á–∏–Ω–≥ —Å –±–∞–∑–æ–π 20,000 –ø–æ–∑–∏—Ü–∏–π...")
    time.sleep(2)
    
    items = [
        {"sku": "B-14-100-8.8", "name": "–ë–æ–ª—Ç –ú14—Ö100 DIN 933 8.8", "qty": 2000, "w_pc": 0.145},
        {"sku": "N-14-8.0", "name": "–ì–∞–π–∫–∞ –ú14 DIN 934 8.0", "qty": 2000, "w_pc": 0.025}
    ]
    
    total_w = sum(i['qty'] * i['w_pc'] for i in items)
    print(f"‚úÖ –ü–æ–¥–æ–±—Ä–∞–Ω–æ: {items[0]['name']} –∏ {items[1]['name']}")
    print(f"‚öñÔ∏è –û–±—â–∏–π –≤–µ—Å –¥–ª—è –ª–æ–≥–∏—Å—Ç–∏–∫–∏: {total_w:.2f} –∫–≥")
    time.sleep(1.5)

    # –°–¶–ï–ù–ê–†–ò–ô 2: –ü–û–î–ë–û–† –ü–û –¢–†–ï–ë–û–í–ê–ù–ò–Ø–ú (–ê–ù–ö–ï–†–´)
    print(f"\nüë§ [–ö–õ–ò–ï–ù–¢]: –ï—â–µ –¥–æ–±–∞–≤—å –∞–Ω–∫–µ—Ä—ã –¥–ª—è —Ç—è–∂–µ–ª–æ–≥–æ –±–µ—Ç–æ–Ω–∞, —à—Ç—É–∫ 50, –ø–æ–¥ –ú12.")
    time.sleep(1)
    
    print(f"ü§ñ [AI]: –î–ª—è —Ç—è–∂–µ–ª–æ–≥–æ –±–µ—Ç–æ–Ω–∞ –ø–æ–¥ –ú12 –ª—É—á—à–µ –≤—Å–µ–≥–æ –ø–æ–¥–æ–π–¥–µ—Ç –ê–Ω–∫–µ—Ä –∫–ª–∏–Ω–æ–≤–æ–π –ú12—Ö150. –î–æ–±–∞–≤–ª—è—é?")
    time.sleep(1.5)
    print(f"‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ: –ê–Ω–∫–µ—Ä –ú12—Ö150 (SKU: A-12-150) | –í–µ—Å: 7.25 –∫–≥")
    time.sleep(1)

    # –°–¶–ï–ù–ê–†–ò–ô 3: UPSELL (–†–ï–ö–û–ú–ï–ù–î–ê–¶–ò–Ø)
    print(f"\nü§ñ [AI RECOMENDATION]: –ï–≤–≥–µ–Ω–∏–π, –≤–∏–∂—É –≤ –∑–∞–∫–∞–∑–µ –º–Ω–æ–≥–æ –±–æ–ª—Ç–æ–≤. –®–∞–π–±—ã DIN 125 (–ú14) –¥–æ–±–∞–≤–∏—Ç—å –≤ —Ä–∞—Å—á–µ—Ç?")
    time.sleep(1)
    print(f"üë§ [–ö–õ–ò–ï–ù–¢]: –î–∞, –¥–∞–≤–∞–π 2000 —à—Ç.")

    # –§–ò–ù–ê–õ–¨–ù–´–ô JSON –î–õ–Ø –ê–î–ú–ò–ù–ê
    print("\n" + "-"*30)
    print("üì° –ì–ï–ù–ï–†–ê–¶–ò–Ø –û–ë–™–ï–ö–¢–ê –î–õ–Ø –ê–î–ú–ò–ù–ö–ò KREPEZH.UA")
    print("-"*30)
    time.sleep(1)
    
    final_order = {
        "order_type": "B2B_PREMIUM",
        "client_profile": client,
        "items": items + [{"sku": "A-12-150", "qty": 50}, {"sku": "W-14-ISO", "qty": 2000}],
        "total_weight_kg": round(total_w + 7.25 + 12.0, 2),
        "status": "READY_FOR_INVOICE",
        "ai_match_accuracy": "99.8%"
    }
    print(json.dumps(final_order, indent=4, ensure_ascii=False))
    
    print("\n" + "="*70)
    print("üèÅ –ó–ê–ü–ò–°–¨ –ó–ê–í–ï–†–®–ï–ù–ê: –°–ò–°–¢–ï–ú–ê –ü–†–û–î–ï–ú–û–ù–°–¢–†–ò–†–û–í–ê–õ–ê –ü–û–õ–ù–´–ô –¶–ò–ö–õ")
    print("="*70)

if __name__ == "__main__":
    run_comprehensive_demo()
